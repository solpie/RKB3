<html>

<head>
    <style>
        .bg {
            position: static;
            padding: 10px;
        }

        .player {
            position: absolute;
            padding: 10px;
            font-size: 35px;
            color: #fff;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script src="/js/socket.io.slim.min.js"></script>
</head>

<body>
    <div id="app">
        <img src="bg.png" />
        <div>
            <span class="player" v-for="(item, index) in items" :key="item.name" :style="item.s">{{item.name}}</span>
        </div>
    </div>
    <script>
        var _p = function (x, y) {
            return 'left:' + x + 'px;' + 'top:' + y + 'px;'
        }
        var app = new Vue({
            el: '#app',
            data: {
                message: 'Hello Vue22!',
                items: []
            },
            // mounted: function() {
            created: function () {
                console.log(this);
                var _this = this
                var x1 = 97
                var x1r = 1680

                var pos = [
                    [x1, 75 + 5],
                    [x1, 75 + 5 + 122],

                    [x1, 330 - 5],
                    [x1, 330 - 5 + 122],

                    [x1, 535 + 40],
                    [x1, 535 + 40 + 122],

                    [x1, 800 + 20],
                    [x1, 800 + 20 + 122],
                ]
                //x1r
                let a = []
                for (let i = 0; i < pos.length; i++) {
                    let p = pos[i];
                    a.push([x1r, p[1]])
                }

                pos = pos.concat(a)

                let x2 =342+5,x2r = 1435
                a = [
                    [x2, 143],
                    [x2, 143+246],

                    [x2, 633+3],
                    [x2, 633+3+246],
                ]

                pos = pos.concat(a)

                
                for (let i = 0; i < a.length; i++) {
                    let p = a[i];
                    pos.push([x2r, p[1]])
                }


                let x3 = 593,x3r = 1185
                a = [
                    [x3,265],
                    [x3,265+492],
                ]
                pos = pos.concat(a)

              for (let i = 0; i < a.length; i++) {
                    let p = a[i];
                    pos.push([x3r, p[1]])
                }


                for (let i = 0; i < pos.length; i++) {
                    let p = pos[i];
                    this.items.push({
                        s: _p(p[0], p[1])
                        ,
                        name: '好天氣其' + i
                    })
                }

                var localWs = io.connect('/rkb')
                localWs.on('connect', () => {
                    console.log('connect', window.location.host)
                })
                    .on('sc_data', (data) => {
                        console.log('sc_data', data)
                        for (var i = 0; i < data.playerArr.length; i++) {
                            var p = data.playerArr[i];
                            _this.items.push({
                                s: _p(pos[i][0], pos[i][1]),
                                name: p.name
                            })
                        }
                    })
            }
        })
    </script>
</body>