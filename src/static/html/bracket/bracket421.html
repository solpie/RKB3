<html>

<head>
    <style>
        .bg {
            position: static;
            padding: 10px;
        }
        
        .player {
            position: absolute;
            padding: 0px;
            font-size: 38px;
            color: #fff;
            width: 300px;
        }
        
        .blue {
            color: #003da7;
            text-align: center;
        }
    </style>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>
    <script src="/js/socket.io.slim.min.js"></script>
</head>

<body>
    <div id="app">
        <img src="bg421.png" />
        <div>
            <div class="player" v-for="(item, index) in items" :key="item.s" :style="item.s">
                <span class="player blue"> {{item.name}}</span>
            </div>
        </div>
    </div>
    <script>
        var _p = function(x, y) {
            return 'left:' + x + 'px;' + 'top:' + y + 'px;'
        }
        var app = new Vue({
            el: '#app',
            data: {
                items: []
            },
            // mounted: function() {
            created: function() {
                console.log(this);
                let pos = []

                let x1 = 42,
                    x1r = 1593
                pos = pos.concat([
                    [x1, 152 + 0],
                    [x1, 152 + 244]
                ])
                pos = pos.concat([
                    [x1, 638 + 5],
                    [x1, 638 + 5 + 244]
                ])
                let a = [],
                    ar = []
                for (let i = 0; i < pos.length; i++) {
                    let p = pos[i]
                    a.push({
                        s: _p(p[0], p[1]),
                        name: '好天氣其'
                    })
                    ar.push({
                        s: _p(x1r, p[1]),
                        name: '好天氣其'
                    })
                }
                this.items = a.concat(ar)

                this.items.push({
                    s: _p(415, 270),
                    name: "好天氣其9"
                })
                this.items.push({
                    s: _p(415, 767),
                    name: "好天氣其0"
                })

                this.items.push({
                    s: _p(1227, 270),
                    name: "好天氣其1"
                })
                this.items.push({
                    s: _p(1227, 767),
                    name: "好天氣其2"
                })

                this.items.push({
                    s: _p(960 - 150, 520) + 'font-size:50px;',
                    name: "好天氣"
                })

                var localWs = io.connect('/rkb')
                localWs.on('connect', () => {
                        console.log('connect', window.location.host)
                    })
                    .on('sc_data', (data) => {
                        console.log('sc_data', data)
                        if (data.dbIdx == '180706') {
                            for (var i = 0; i < data.rec.length; i++) {
                                let rec = data.rec[i];

                                let item1 = this.items[i * 2]
                                let item2 = this.items[i * 2 + 1]
                                let p1 = data.playerMap[rec.player[0]]
                                let p2 = data.playerMap[rec.player[1]]
                                item1.name = p1.name
                                item2.name = p2.name
                            }
                        }
                    })
            }
        })
    </script>
</body>